# ä¿¡æ‰˜è´¦æˆ·ç›´æ¥ä¿®æ”¹ä½™é¢åŠŸèƒ½è¯´æ˜

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

ç®¡ç†å‘˜å’Œå®¢æˆ·ç»ç†å¯ä»¥ç›´æ¥ä¿®æ”¹ä¿¡æ‰˜è´¦æˆ·ä½™é¢ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºè°ƒæ•´è®°å½•å¹¶è®¡ç®—å·®é¢ã€‚

## ğŸ“ åŠŸèƒ½ä½ç½®

- âœ… **Admin é¡µé¢**ï¼š`/admin/trust-account`
- âœ… **Client Manager é¡µé¢**ï¼š`/client-manager/trust-account`
- âŒ **Client é¡µé¢**ï¼šä¸å¯ç”¨ï¼ˆåªè¯»ï¼‰
- âŒ **Surrogacy é¡µé¢**ï¼šä¸å¯ç”¨ï¼ˆåªè¯»ï¼‰

## ğŸ¨ UI ç•Œé¢

### ä½™é¢å¡ç‰‡æ˜¾ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è´¦æˆ·ä½™é¢                 $10,000.00 [ä¿®æ”¹ä½™é¢] â”‚
â”‚ Updated today                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‚¹å‡»åå¼¹å‡ºè¾“å…¥æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯·è¾“å…¥æ–°çš„è´¦æˆ·ä½™é¢ï¼š              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 15000                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         [å–æ¶ˆ]      [ç¡®å®š]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. ç”¨æˆ·æ“ä½œ
```
ç‚¹å‡»"ä¿®æ”¹ä½™é¢"æŒ‰é’® â†’ è¾“å…¥æ–°ä½™é¢ â†’ ç¡®è®¤
```

### 2. ç³»ç»Ÿè‡ªåŠ¨å¤„ç†
```typescript
å½“å‰ä½™é¢: $10,000.00
è¾“å…¥ä½™é¢: $15,000.00
         â†“
è‡ªåŠ¨è®¡ç®—å·®é¢: +$5,000.00
         â†“
åˆ›å»ºè°ƒæ•´è®°å½•:
- ç±»å‹: OTHER
- é‡‘é¢: +5000
- å˜åŠ¨å‰: 10000
- å˜åŠ¨å: 15000
- æ”¶æ¬¾äºº: null
- å¤‡æ³¨: "ä½™é¢è°ƒæ•´"
- å¯è§æ€§: true
         â†“
ä¿å­˜åˆ°æ•°æ®åº“ â†’ åˆ·æ–°é¡µé¢
```

## ğŸ’¡ ç¤ºä¾‹åœºæ™¯

### åœºæ™¯ 1: å¢åŠ ä½™é¢
```
å½“å‰ä½™é¢: $10,000.00
ä¿®æ”¹ä¸º:   $15,000.00
å·®é¢:     +$5,000.00 (å……å€¼/å¢åŠ )

ç”Ÿæˆè®°å½•:
- å˜åŠ¨ç±»å‹: OTHER
- å˜åŠ¨é‡‘é¢: +5000
- å˜åŠ¨å‰ä½™é¢: 10000
- å˜åŠ¨åä½™é¢: 15000
- å¤‡æ³¨: ä½™é¢è°ƒæ•´
```

### åœºæ™¯ 2: å‡å°‘ä½™é¢
```
å½“å‰ä½™é¢: $10,000.00
ä¿®æ”¹ä¸º:   $7,000.00
å·®é¢:     -$3,000.00 (æ‰£é™¤/å‡å°‘)

ç”Ÿæˆè®°å½•:
- å˜åŠ¨ç±»å‹: OTHER
- å˜åŠ¨é‡‘é¢: -3000
- å˜åŠ¨å‰ä½™é¢: 10000
- å˜åŠ¨åä½™é¢: 7000
- å¤‡æ³¨: ä½™é¢è°ƒæ•´
```

### åœºæ™¯ 3: ä½™é¢å½’é›¶
```
å½“å‰ä½™é¢: $10,000.00
ä¿®æ”¹ä¸º:   $0.00
å·®é¢:     -$10,000.00

ç”Ÿæˆè®°å½•:
- å˜åŠ¨ç±»å‹: OTHER
- å˜åŠ¨é‡‘é¢: -10000
- å˜åŠ¨å‰ä½™é¢: 10000
- å˜åŠ¨åä½™é¢: 0
- å¤‡æ³¨: ä½™é¢è°ƒæ•´
```

## ğŸŒ å›½é™…åŒ–

| å…ƒç´  | ä¸­æ–‡ | English |
|------|------|---------|
| æŒ‰é’® | ä¿®æ”¹ä½™é¢ | Edit Balance |
| æç¤º | è¯·è¾“å…¥æ–°çš„è´¦æˆ·ä½™é¢ï¼š | Please enter new account balance: |
| è®°å½•å¤‡æ³¨ | ä½™é¢è°ƒæ•´ | Balance Adjustment |
| å¤±è´¥æç¤º | ä¿®æ”¹ä½™é¢å¤±è´¥ï¼Œè¯·é‡è¯• | Failed to edit balance, please try again |

## ğŸ” æƒé™è®¾è®¡

| ç”¨æˆ·è§’è‰² | æŸ¥çœ‹ä½™é¢ | ä¿®æ”¹ä½™é¢ | æŸ¥çœ‹è®°å½• | æ·»åŠ è®°å½• |
|---------|---------|---------|---------|---------|
| Admin | âœ… | âœ… | âœ… | âœ… |
| Manager | âœ… | âœ… | âœ… | âœ… |
| Client | âœ… | âŒ | âœ… (å¯è§è®°å½•) | âŒ |
| Surrogacy | âœ… | âŒ | âœ… | âŒ |

## ğŸ“Š è‡ªåŠ¨è®°å½•å­—æ®µ

ä¿®æ”¹ä½™é¢æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨å¡«å……ä»¥ä¸‹å­—æ®µï¼š

| å­—æ®µ | å€¼ | è¯´æ˜ |
|-----|---|------|
| `change_type` | `'OTHER'` | å›ºå®šä¸º"å…¶ä»–"ç±»å‹ |
| `change_amount` | è®¡ç®—å€¼ | `æ–°ä½™é¢ - å½“å‰ä½™é¢` |
| `balance_before` | å½“å‰ä½™é¢ | è‡ªåŠ¨è·å–æœ€æ–°è®°å½•çš„ `balance_after` |
| `balance_after` | ç”¨æˆ·è¾“å…¥ | ç”¨æˆ·è¾“å…¥çš„æ–°ä½™é¢ |
| `receiver` | `null` | è‡ªåŠ¨è°ƒæ•´æ— æ”¶æ¬¾äºº |
| `remark` | `'ä½™é¢è°ƒæ•´'` | è‡ªåŠ¨å¡«å…… (æ”¯æŒå›½é™…åŒ–) |
| `visibility` | `'true'` | é»˜è®¤å¯è§ |

## âœ… æ•°æ®éªŒè¯

### è¾“å…¥éªŒè¯
- âœ… å¿…é¡»æ˜¯æœ‰æ•ˆæ•°å­—
- âœ… å¯ä»¥æ˜¯æ­£æ•°ã€è´Ÿæ•°æˆ–é›¶
- âœ… æ”¯æŒå°æ•°
- âŒ æ‹’ç»éæ•°å­—è¾“å…¥

### ä¸šåŠ¡è§„åˆ™
- âœ… è‡ªåŠ¨è®¡ç®—å·®é¢ï¼ˆæ— éœ€æ‰‹åŠ¨è¾“å…¥ï¼‰
- âœ… ä¿ç•™å®Œæ•´çš„å®¡è®¡è¿½è¸ª
- âœ… å®æ—¶æ›´æ–°ä½™é¢æ˜¾ç¤º
- âœ… é”™è¯¯æ—¶å›æ»šæ“ä½œ

## ğŸ” å®¡è®¡è¿½è¸ª

æ‰€æœ‰é€šè¿‡"ä¿®æ”¹ä½™é¢"åŠŸèƒ½çš„æ“ä½œéƒ½ä¼šåœ¨äº¤æ˜“å†å²ä¸­æ˜¾ç¤ºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—¥æœŸ                ç±»å‹  é‡‘é¢      æ”¶æ¬¾äºº  å¤‡æ³¨            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2025-10-20 15:30   å…¶ä»–  +5000.00  -      ä½™é¢è°ƒæ•´         â”‚
â”‚ 2025-10-19 10:15   å……å€¼  +10000.00 å¼ ä¸‰   åˆå§‹å……å€¼         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ä½¿ç”¨å»ºè®®

### é€‚ç”¨åœºæ™¯
1. âœ… **å¿«é€Ÿä½™é¢è°ƒæ•´**ï¼šå‘ç°ä½™é¢é”™è¯¯éœ€è¦ç«‹å³ä¿®æ­£
2. âœ… **åˆå§‹åŒ–ä½™é¢**ï¼šæ–°æ¡ˆä¾‹éœ€è¦è®¾ç½®åˆå§‹ä½™é¢
3. âœ… **æ‰¹é‡å¯¼å…¥åè°ƒæ•´**ï¼šæ‰¹é‡å¯¼å…¥æ•°æ®åç»Ÿä¸€è°ƒæ•´
4. âœ… **å®¡è®¡çº é”™**ï¼šå‘ç°å†å²è®°å½•é”™è¯¯éœ€è¦ä¿®æ­£

### ä¸é€‚ç”¨åœºæ™¯
1. âŒ **æ—¥å¸¸å……å€¼**ï¼šåº”ä½¿ç”¨"æ·»åŠ è®°å½•"å¹¶é€‰æ‹©"å……å€¼"ç±»å‹
2. âŒ **æ—¥å¸¸æ¶ˆè´¹**ï¼šåº”ä½¿ç”¨"æ·»åŠ è®°å½•"å¹¶é€‰æ‹©"æ¶ˆè´¹"ç±»å‹
3. âŒ **æŒ‡å®šæ”¶æ¬¾äºº**ï¼šå¦‚éœ€è®°å½•æ”¶æ¬¾äººï¼Œè¯·ä½¿ç”¨"æ·»åŠ è®°å½•"

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### æ ¸å¿ƒå‡½æ•°
```typescript
const handleBalanceEdit = async (newBalance: number) => {
  // 1. è·å–å½“å‰ä½™é¢
  const currentBalance = getCurrentBalance();
  
  // 2. è®¡ç®—å·®é¢
  const changeAmount = newBalance - currentBalance;
  
  // 3. åˆ›å»ºè°ƒæ•´è®°å½•
  await createBalanceChange({
    change_type: 'OTHER',
    change_amount: changeAmount,
    balance_before: currentBalance,
    balance_after: newBalance,
    receiver: null,
    remark: t('trustAccount.balanceAdjustment'),
    visibility: 'true',
  });
  
  // 4. åˆ·æ–°æ•°æ®
  await fetchChanges();
};
```

### API è°ƒç”¨
```typescript
POST /api/trust-account/change
Content-Type: application/json

{
  "caseId": 123,
  "change_type": "OTHER",
  "change_amount": 5000,
  "balance_before": 10000,
  "balance_after": 15000,
  "receiver": null,
  "remark": "ä½™é¢è°ƒæ•´",
  "visibility": "true"
}
```

## ğŸ‰ ä¼˜åŠ¿ç‰¹æ€§

1. **ç®€åŒ–æ“ä½œ**ï¼šæ— éœ€æ‰‹åŠ¨è®¡ç®—å·®é¢
2. **è‡ªåŠ¨è®°å½•**ï¼šå®Œæ•´ä¿ç•™æ“ä½œå†å²
3. **æƒé™æ§åˆ¶**ï¼šä»…ç®¡ç†å‘˜å¯ç”¨
4. **å›½é™…åŒ–æ”¯æŒ**ï¼šä¸­è‹±æ–‡ç•Œé¢
5. **é”™è¯¯å¤„ç†**ï¼šå‹å¥½çš„é”™è¯¯æç¤º
6. **å®æ—¶æ›´æ–°**ï¼šå³æ—¶æ˜¾ç¤ºæœ€æ–°ä½™é¢

---

**æ³¨æ„**ï¼šæ­¤åŠŸèƒ½ä»…ç”¨äºç®¡ç†ç›®çš„ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¼šè¢«å®Œæ•´è®°å½•å¹¶å¯è¿½æº¯ã€‚å»ºè®®åœ¨ä½¿ç”¨å‰ç¡®è®¤æ–°ä½™é¢çš„æ­£ç¡®æ€§ã€‚

