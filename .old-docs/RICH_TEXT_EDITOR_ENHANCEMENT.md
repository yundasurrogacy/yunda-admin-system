# å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å¢å¼º - å›¾ç‰‡å’Œè§†é¢‘æ”¯æŒ

## âœ… å®Œæˆçš„åŠŸèƒ½

### 1. **å›¾ç‰‡åŠŸèƒ½**
- âœ… ä¸Šä¼ æœ¬åœ°å›¾ç‰‡ï¼ˆæ–‡ä»¶é€‰æ‹©ï¼‰
- âœ… é€šè¿‡URLæ’å…¥å›¾ç‰‡
- âœ… å›¾ç‰‡å¤§å°é™åˆ¶ï¼ˆ5MBï¼‰
- âœ… æ–‡ä»¶ç±»å‹éªŒè¯
- âœ… å›¾ç‰‡è‡ªé€‚åº”æ˜¾ç¤ºï¼ˆmax-width: 100%ï¼‰
- âœ… å›¾ç‰‡åœ†è§’ç¾åŒ–ï¼ˆborder-radius: 8pxï¼‰
- âœ… é¼ æ ‡æ‚¬åœæ•ˆæœ

### 2. **è§†é¢‘åŠŸèƒ½**
- âœ… ä¸Šä¼ æœ¬åœ°è§†é¢‘ï¼ˆæ–‡ä»¶é€‰æ‹©ï¼‰
- âœ… é€šè¿‡URLæ’å…¥è§†é¢‘
- âœ… è§†é¢‘å¤§å°é™åˆ¶ï¼ˆ50MBï¼‰
- âœ… æ–‡ä»¶ç±»å‹éªŒè¯
- âœ… è§†é¢‘è‡ªé€‚åº”æ˜¾ç¤ºï¼ˆmax-width: 100%ï¼‰
- âœ… è‡ªåŠ¨æ·»åŠ æ’­æ”¾æ§ä»¶
- âœ… è§†é¢‘åœ†è§’ç¾åŒ–

### 3. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
- âœ… ä¸Šä¼ è¿›åº¦æŒ‡ç¤ºï¼ˆâ³å›¾æ ‡ï¼‰
- âœ… ä¸Šä¼ æ—¶ç¦ç”¨æŒ‰é’®
- âœ… é”™è¯¯æç¤ºï¼ˆæ–‡ä»¶ç±»å‹ã€å¤§å°ã€ä¸Šä¼ å¤±è´¥ï¼‰
- âœ… è‡ªåŠ¨æ¸…ç©ºæ–‡ä»¶è¾“å…¥
- âœ… æ™ºèƒ½å…‰æ ‡ä½ç½®æ’å…¥

## ğŸ¨ å·¥å…·æ æŒ‰é’®å¸ƒå±€

### å®Œæ•´å·¥å…·æ ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼š
1. **B** - ç²—ä½“
2. **I** - æ–œä½“
3. **U** - ä¸‹åˆ’çº¿
4. **S** - åˆ é™¤çº¿
5. **|** åˆ†éš”çº¿
6. **â€¢** - æ— åºåˆ—è¡¨
7. **1.** - æœ‰åºåˆ—è¡¨
8. **|** åˆ†éš”çº¿
9. **âŠ** - å·¦å¯¹é½
10. **âŠ** - å±…ä¸­
11. **âŠ** - å³å¯¹é½
12. **|** åˆ†éš”çº¿
13. **ğŸ–¼ï¸** - ä¸Šä¼ å›¾ç‰‡
14. **ğŸ¬** - ä¸Šä¼ è§†é¢‘
15. **|** åˆ†éš”çº¿
16. **âœ•** - æ¸…é™¤æ ¼å¼

### å·²ç§»é™¤çš„åŠŸèƒ½ï¼š
- âŒ æ ‡é¢˜é€‰æ‹©ä¸‹æ‹‰èœå•ï¼ˆH1/H2/H3ï¼‰
- âŒ å­—ä½“å¤§å°é€‰æ‹©ä¸‹æ‹‰èœå•
- âŒ æ’å…¥é“¾æ¥æŒ‰é’® (ğŸ”—)
- âŒ å›¾ç‰‡URLæŒ‰é’® (ğŸï¸)
- âŒ è§†é¢‘URLæŒ‰é’® (ğŸ“¹)

### ä¸Šä¼ çŠ¶æ€ï¼š
- **æ­£å¸¸**ï¼šæ˜¾ç¤ºå¯¹åº”å›¾æ ‡ (ğŸ–¼ï¸ / ğŸ¬)
- **ä¸Šä¼ ä¸­**ï¼šæ˜¾ç¤º â³ å›¾æ ‡ï¼ŒæŒ‰é’®ç¦ç”¨

## ğŸ“‹ æŠ€æœ¯å®ç°

### æ–‡ä»¶ä¸Šä¼ 
```typescript
// ä½¿ç”¨ç°æœ‰çš„ä¸Šä¼ API
const UPLOAD_API = '/api/upload/form';

// ä¸Šä¼ æµç¨‹
1. æ–‡ä»¶é€‰æ‹©
2. éªŒè¯ï¼ˆç±»å‹ã€å¤§å°ï¼‰
3. FormDataä¸Šä¼ 
4. è·å–URL
5. æ’å…¥ç¼–è¾‘å™¨
6. è§¦å‘onChange
```

### æ–‡ä»¶éªŒè¯

**å›¾ç‰‡é™åˆ¶ï¼š**
- ç±»å‹ï¼š`image/*`
- å¤§å°ï¼š5MB
- é”™è¯¯æç¤ºï¼š`richEditor.invalidImageType`ã€`richEditor.imageTooLarge`

**è§†é¢‘é™åˆ¶ï¼š**
- ç±»å‹ï¼š`video/*`
- å¤§å°ï¼š50MB
- é”™è¯¯æç¤ºï¼š`richEditor.invalidVideoType`ã€`richEditor.videoTooLarge`

### DOMæ’å…¥é€»è¾‘

```typescript
// åˆ›å»ºå…ƒç´ 
const img = document.createElement('img');
img.src = imageUrl;
img.style.maxWidth = '100%';
img.style.height = 'auto';
img.style.margin = '10px 0';

// æ’å…¥åˆ°å…‰æ ‡ä½ç½®
const selection = window.getSelection();
if (selection && selection.rangeCount > 0) {
  const range = selection.getRangeAt(0);
  range.deleteContents();
  range.insertNode(img);
  range.collapse(false);
} else {
  editorRef.current.appendChild(img);
}
```

## ğŸ¯ æ ·å¼ä¼˜åŒ–

### CSSæ ·å¼
```css
[contentEditable] img {
  max-width: 100%;
  height: auto;
  margin: 10px 0;
  border-radius: 8px;
  display: block;
  cursor: pointer;
}

[contentEditable] img:hover {
  opacity: 0.9;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

[contentEditable] video {
  max-width: 100%;
  margin: 10px 0;
  border-radius: 8px;
  display: block;
}
```

## ğŸŒ å›½é™…åŒ–æ–‡æœ¬

éœ€è¦æ·»åŠ åˆ° `common.json`ï¼š

```json
{
  "richEditor": {
    // ç°æœ‰ç¿»è¯‘...
    "uploadImage": "ä¸Šä¼ å›¾ç‰‡",
    "uploadVideo": "ä¸Šä¼ è§†é¢‘",
    "insertImageUrl": "å›¾ç‰‡URL",
    "insertVideoUrl": "è§†é¢‘URL",
    "enterImageUrl": "è¯·è¾“å…¥å›¾ç‰‡URL:",
    "enterVideoUrl": "è¯·è¾“å…¥è§†é¢‘URL:",
    "invalidImageType": "è¯·é€‰æ‹©æœ‰æ•ˆçš„å›¾ç‰‡æ–‡ä»¶",
    "invalidVideoType": "è¯·é€‰æ‹©æœ‰æ•ˆçš„è§†é¢‘æ–‡ä»¶",
    "imageTooLarge": "å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB",
    "videoTooLarge": "è§†é¢‘å¤§å°ä¸èƒ½è¶…è¿‡50MB",
    "uploadFailed": "ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•",
    "uploadError": "ä¸Šä¼ å‡ºé”™ï¼Œè¯·é‡è¯•"
  }
}
```

## ğŸ“¦ ä½¿ç”¨ç¤ºä¾‹

### åœ¨åšå®¢ç¼–è¾‘å™¨ä¸­ä½¿ç”¨
```tsx
<RichTextEditor
  value={form.content} 
  onChange={(value) => setForm({ ...form, content: value })}
  placeholder="è¯·è¾“å…¥ä¸­æ–‡å†…å®¹"
  minHeight="200px"
/>
```

### åŠŸèƒ½æµç¨‹

**ä¸Šä¼ å›¾ç‰‡ï¼š**
1. ç‚¹å‡» ğŸ–¼ï¸ æŒ‰é’®
2. é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
3. è‡ªåŠ¨éªŒè¯å¹¶ä¸Šä¼ 
4. å›¾ç‰‡æ’å…¥åˆ°ç¼–è¾‘å™¨
5. å¯åœ¨ç¼–è¾‘å™¨ä¸­è°ƒæ•´ä½ç½®

**ä¸Šä¼ è§†é¢‘ï¼š**
1. ç‚¹å‡» ğŸ¬ æŒ‰é’®
2. é€‰æ‹©è§†é¢‘æ–‡ä»¶
3. è‡ªåŠ¨éªŒè¯å¹¶ä¸Šä¼ 
4. è§†é¢‘æ’å…¥åˆ°ç¼–è¾‘å™¨
5. è‡ªåŠ¨æ˜¾ç¤ºæ’­æ”¾æ§ä»¶

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶å¤§å°é™åˆ¶**
   - å›¾ç‰‡ï¼šæœ€å¤§5MB
   - è§†é¢‘ï¼šæœ€å¤§50MB
   - è¶…è¿‡é™åˆ¶ä¼šå¼¹çª—æç¤º

2. **æ–‡ä»¶ç±»å‹éªŒè¯**
   - å›¾ç‰‡ï¼šåªæ¥å— `image/*` ç±»å‹
   - è§†é¢‘ï¼šåªæ¥å— `video/*` ç±»å‹
   - ç±»å‹ä¸ç¬¦ä¼šå¼¹çª—æç¤º

3. **ä¸Šä¼ API**
   - ä½¿ç”¨ç°æœ‰çš„ `/api/upload/form` æ¥å£
   - éœ€è¦è¿”å›æ ¼å¼ï¼š`{ success: true, data: { url: '...' } }`

4. **æµè§ˆå™¨å…¼å®¹æ€§**
   - ä½¿ç”¨æ ‡å‡†çš„ `document.execCommand`
   - æ”¯æŒç°ä»£æµè§ˆå™¨
   - å›¾ç‰‡å’Œè§†é¢‘å…ƒç´ é‡‡ç”¨åŸç”ŸHTML5

## ğŸ‰ ä¼˜åŠ¿

1. **ç®€å•æ˜“ç”¨**ï¼šä¸€é”®ä¸Šä¼ ï¼Œè‡ªåŠ¨å¤„ç†
2. **çµæ´»å¤šæ ·**ï¼šæ”¯æŒä¸Šä¼ å’ŒURLä¸¤ç§æ–¹å¼
3. **å®‰å…¨å¯é **ï¼šæ–‡ä»¶éªŒè¯ï¼Œå¤§å°é™åˆ¶
4. **è§†è§‰ç¾è§‚**ï¼šåœ†è§’ã€é˜´å½±ã€æ‚¬åœæ•ˆæœ
5. **å“åº”å¼**ï¼šå›¾ç‰‡å’Œè§†é¢‘è‡ªé€‚åº”å®¹å™¨å®½åº¦

## ğŸ”„ åç»­å¯æ‰©å±•

1. å›¾ç‰‡è£å‰ªåŠŸèƒ½
2. å›¾ç‰‡å‹ç¼©ä¼˜åŒ–
3. è§†é¢‘ç¼©ç•¥å›¾é¢„è§ˆ
4. æ‹–æ‹½ä¸Šä¼ 
5. ç²˜è´´ä¸Šä¼ 
6. äº‘å­˜å‚¨é›†æˆ
7. å›¾ç‰‡Altæ–‡æœ¬ç¼–è¾‘
8. è§†é¢‘æ’­æ”¾å™¨è‡ªå®šä¹‰

